<!DOCTYPE html>
<html lang="pt-br">
<head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro - Fade</title>
    <link rel="stylesheet" href="./css/cadastro.css">
    <link rel="stylesheet" href="./css/Index.css">
    <link rel="sortcut icon" href="./Imagens/icon_and_graphics_2.gif" type="image/x-icon" />

</head>

<!-- NAVBAR -->
<header>
  <a href="Index.html">
    <img
      src="./Imagens/Logotipo - Grupo 10.png"
      alt="logo"
      class="logo"
      width="170px"
      height="60px" />

  </a>
    <nav>
      <ul class="nav-links">
        <li><a href="Index.html">Serviço</a></li>
        <li><a href="Index.html">Solução</a></li>
        <li><a href="sobre.html">Sobre nos</a></li>
        <li><a href="Contato.html">Contato</a></li>
      </ul>
    </nav>
  <a class="cta" href="./Login.html"><button>Entrar</button></a>

</header>

    <div class="imgPrincipal">
        <div class="cadastro">
            <h2>CADASTRE-SE PARA ACESSAR O SISTEMA</h2><br>
                <form id="form_cadastro" method="post" onsubmit="return cadastrar()">
                    <p>Usuario</p>
                    <input name="login" required="required" >
                    <p>Celular</p>
                    <input name="celular" placeholder="00 00000-0000" required="required" >
                    <p>CPF</p>
                    <input name="cpf" placeholder="000.000.000-00" required="required" > 
                    <p>Senha</p>
                    <input name="senha" type="password" required="required">
                    <p>Código da empresa</p>
                    <input name="loja"> 
                    <button type="submit">CADASTRAR</button>
                </form>
        </div>
    </div>

</body>
</html>

<script>

function cadastrar() {
        var formulario = new URLSearchParams(new FormData(form_cadastro));
        fetch("/usuarios/cadastrar", {
            method: "POST",
            body: formulario
        }).then(function (response) {
            
            if (response.ok) {

                window.location.href='./Login.html';
                alert('Faça login para confirmar que foi registrado!')

            } else {

                console.log('Erro de cadastro!');
                response.text().then(function (resposta) {
                    div_erro.innerHTML = resposta;
                });
            }
        });

        return false;
    }
    
  function aguardar() {
      btn_entrar.disabled = true;
      img_aguarde.style.display='block';
      div_erro.style.display='none';
  }

  function finalizar_aguardar() {
      btn_entrar.disabled = false;
      img_aguarde.style.display='none';
      div_erro.style.display='block';
  }

</script>